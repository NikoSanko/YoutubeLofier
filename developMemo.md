# 開発メモ
## 仕組み
#### エフェクトが適用される基本の仕組みは以下の通りだ
1. ブラウザで再生した音声、動画を取得する
2. 取得した音声、動画の音声出力先をエフェクトノードに設定する
3. エフェクトノードの出力先を、次に適用したいエフェクトノードに設定する
4. 最後に適用したエフェクトノードの出力先を、システムの音声出力に設定する

ポップアップ上に ON/OFF ボタンを配置し、ON なら上記のようにノードを接続し、
OFF ならブラウザから取得した音声をシステム出力に直接つなぐ

#### LoFi 機能のために適用したいエフェクトを以下列挙する
* EQ (HighPass & LowPass)
* Compressor
* Saturator
* Amp
* ノイズ
* Delay

## 実装したい機能
~~エフェクトのmix具合を調整する~~
エフェクトをレイヤーでかける
popupのボタンで切り替え
リッチなpopup
    - ON時にはレコードに見立てた円盤が回る
    - OFF時にはゆるやかに回転が止まる

## 仕様
Youtube / YoutubeMusic で動くことは確認したが、Spotifyには適用できなかった。
これは、Spotifyのセキュリティ上の問題のようで、エフェクトを適用したい場合SpotifyのAPIを利用する必要がある。
また、SoundCloudでも適用できなかったため、YoutubeMusic以外のストリーミングサービスでは適用出来ないのだろう。
各ストリーミングサービスで個別実装するのは実装コストが大きいため、本拡張では Youtube / YoutubeMusic に絞って実装する。
